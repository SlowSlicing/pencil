Linux
挂载,mount,RHEL,CentOS
&emsp;&emsp;我们在用惯了Windows 系统后总觉得一切都是理所当然的，平时把U 盘插入到电脑后也从来没有考虑过Windows 系统做了哪些事情，才使得我们可以访问这个U 盘的。接下来会逐一学习在Linux 系统中挂载和卸载存储设备的方法，以便更好地了解Linux 系统添加硬件设备的工作原理和流程。在拿到一块全新的硬盘存储设备后要先分区，然后格式化，最后才能挂载并正常使用。`分区`和`格式化`以前经常听到，但`挂载`又是什么呢？在这里有一个最简单、最贴切的解释——当用户需要使用硬盘设备或分区中的数据时，需要先将其与一个已存在的目录文件进行关联，而这个关联动作就是·挂载·。下文将逐步记录如何使用硬盘设备。

#### mount 命令

&emsp;&emsp;`mount` 命令用于挂载文件系统，格式为`mount 文件系统 挂载目录`。
&emsp;&emsp;`mount 命令`中可用的参数及作用如下表所示。挂载是在使用硬件设备前所执行的最后一步操作。只需使用`mount 命令`把硬盘设备或分区与一个目录文件进行关联，然后就能在这个目录中看到硬件设备中的数据了。对于比较新的Linux 系统来讲，一般不需要使用`-t 参数`来指定文件系统的类型，Linux 系统会自动进行判断。而mount 中的`-a 参数`则厉害了，它会在执行后自动检查`/etc/fstab` 文件中有无疏漏被挂载的设备文件，如果有，则进行自动挂载操作。

| 参数 | 作用 |
| --- | --- |
| -a | 挂载所有在`/etc/fstab` 中定义的文件系统 |
| -t | 指定文件系统的类型 |

&emsp;&emsp;例如，要把设备`/dev/sdb2` 挂载到`/backup` 目录，只需要在`mount 命令`中填写设备与挂载目录参数就行，系统会自动去判断要挂载文件的类型，因此只需要执行下述命令即可：

```
[root@lynchj ~]# mount /dev/sdb2 /backup
```

&emsp;&emsp;虽然按照上面的方法执行`mount 命令`后就能立即使用文件系统了，但系统在重启后挂载就会失效，也就是说我们需要每次开机后都手动挂载一下。这肯定不是我们想要的效果，如果想让硬件设备和目录永久地进行自动关联，就必须把挂载信息按照指定的填写格式`设备文件 挂载目录 格式类型 权限选项 是否备份 是否自检`（各字段的意义见下表）写入到`/etc/fstab` 文件中。这个文件中包含着挂载所需的诸多信息项目，一旦配置好之后就能一劳永逸了。

| 字段 | 意义 |
| --- | --- |
| 设备文件 | 一般为设备的路径+ 设备名称， 也可以写唯一识别码（ UUID ，Universally Unique Identifier）|
| 挂载目录 | 指定要挂载到的目录，需在挂载前创建好 |
| 格式类型 | 指定文件系统的格式，比如Ext3、Ext4、XFS、SWAP、iso9660（此为光盘设备）等 |
| 权限选项 | 若设置为defaults，则默认权限为：rw, suid, dev, exec, auto, nouser, async |
| 是否备份 | 若为1 则开机后使用dump 进行磁盘备份，为0 则不备份 |
| 是否自检 | 若为1 则开机后自动进行磁盘自检，为0 则不自检 |

&emsp;&emsp;如果想将文件系统为`ext4` 的硬件设备`/dev/sdb2` 在开机后自动挂载到`/backup` 目录上，并保持默认权限且无需开机自检，就需要在`/etc/fstab` 文件中写入下面的信息，这样在系统重启后也会成功挂载。

```
[root@lynchj ~]# vim /etc/fstab
#
# /etc/fstab
# Created by anaconda on Wed May 4 19:26:23 2017
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/rhel-root / xfs defaults 1 1
UUID=812b1f7c-8b5b-43da-8c06-b9999e0fe48b /boot xfs defaults 1 2
/dev/mapper /rhel-swap swap swap defaults 0 0
/dev/cdrom /media/cdrom iso9660 defaults 0 0
// 新增
/dev/sdb2 /backup ext4 defaults 0 0
```

#### umount 命令

&emsp;&emsp;`umount` 命令用于撤销已经挂载的设备文件，格式为`umount [挂载点/设备文件]`。
&emsp;&emsp;我们挂载文件系统的目的是为了使用硬件资源，而卸载文件系统就意味不再使用硬件的设备资源；相对应地，挂载操作就是把硬件设备与目录进行关联的动作，因此卸载操作只需要说明想要取消关联的设备文件或挂载目录的其中一项即可，一般不需要加其他额外的参数。我们来尝试手动卸载掉`/dev/sdb2` 设备文件：

```
[root@linuxprobe ~]# umount /dev/sdb2
```

