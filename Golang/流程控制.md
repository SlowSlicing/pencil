[toc]

　　程序设计语言的流程控制语句，用于设定计算执行的次序，建立程序的逻辑结构。可以说，流程控制语句是整个程序的骨架。

　　从根本上讲，流程控制只是为了控制程序语句的执行顺序，一般需要与各种条件配合，因此，在各种流程中，会加入条件判断语句。流程控制语句一般起以下3个作用：

* 选择，即根据条件跳转到不同的执行序列；
* 循环，即根据条件反复执行某个序列，当然每一次循环执行的输入输出可能会发生变化；
* 跳转，即根据条件返回到某执行序列；

　　Go 语言支持如下的几种流程控制语句：

* 条件语句，对应的关键字为 if、else 和 else if；
* 选择语句，对应的关键字为 switch、case 和 select（channel 配合使用）；
* 循环语句，对应的关键字为 for 和 range；
* 跳转语句，对应的关键字为 goto。

　　在具体的应用场景中，为了满足更丰富的控制需求，Go 语言还添加了如下关键字：`break`、`continue` 和 `fallthrough`。在实际的使用中，需要根据具体的逻辑目标、程序执行的时间和空间限制、代码的可读性、编译器的代码优化设定等多种因素，灵活组合。

　　接下来简要介绍一下各种流程控制功能的用法以及需要注意的要点。

# 条件语句

　　关于条件语句的样例代码如下：

```
if a < 5 {
	return 0
} else {
	return 1
}
```

　　关于条件语句，需要注意以下几点：

* 条件语句`不需要`使用括号将条件包含起来 ()；
* 无论语句体内有几条语句，花括号 {} 都是`必须存在`的；
* 左花括号 `{` 必须与 if 或者 else 处于同一行；
* 在 if 之后，条件语句之前，可以添加变量初始化语句，使用 `;` 间隔；
* 在有返回值的函数中，不允许将 “最终的” return语句包含在 if...else... 结构中，否则会编译失败：

```
function ends without a return statement。
```

　　失败的原因在于，Go 编译器无法找到终止该函数的 return 语句。编译失败的案例如下：

```
func example(x int) int {
	if x == 0 {
		return 5
	} else {
		return x
	}
}
```

# 选择语句

　　根据传入条件的不同，选择语句会执行不同的语句。下面的例子根据传入的整型变量 i 的不同而打印不同的内容：

```
switch i {
	case 0:
		fmt.Printf("0")
	case 1:
		fmt.Printf("1")
	case 2:
		fallthrough
	case 3:
		fmt.Printf("3")
	case 4, 5, 6:
		fmt.Printf("4, 5, 6")
	default:
		fmt.Printf("Default")
}
```

　　运行上面的案例，将会得到如下结果：

1. i = 0时，输出0；
2. i = 1时，输出1；
3. i = 2时，输出3；
4. i = 3时，输出3；
5. i = 4时，输出4, 5, 6；
6. i = 5时，输出4, 5, 6；
7. i = 6时，输出4, 5, 6；
8. i = 其他任意值时，输出Default。

　　比较有意思的是，switch后面的表达式甚至不是必需的，比如下面的例子：

```
switch {
	case 0 <= Num && Num <= 3:
		fmt.Printf("0-3")
	case 4 <= Num && Num <= 6:
		fmt.Printf("4-6")
	case 7 <= Num && Num <= 9:
		fmt.Printf("7-9")
}
```

　　在使用 switch 结构时，我们需要注意以下几点：

* 左花括号 `{` 必须与 switch 处于同一行；
* 条件表达式不限制为常量或者整数；
* 单个 case 中，可以出现多个结果选项；
* 与 C 语言等规则相反，Go 语言不需要用 break 来明确退出一个 case；
* 只有在 case 中明确添加 `fallthrough` 关键字，才会继续执行紧跟的下一个 case；
* 可以不设定 switch 之后的条件表达式，在此种情况下，整个 switch 结构与多个 if...else... 的逻辑作用等同。

# 循环语句

　　与多数语言不同的是，**Go 语言中的循环语句只支持 for 关键字，而不支持 while 和 do-while 结构**。关键字 for 的基本使用方法与 C 和 C++ 中非常接近：

```
sum := 0
for i := 0; i < 10; i++ {
	sum += i
}
```

　　可以看到比较大的一个不同在于 for 后面的条件表达式不需要用圆括号 () 包含起来。Go 语言还进一步考虑到无限循环的场景，让开发者不用写无聊的 `for (;;) {}` 和 `do {} while(1);`，而直接简化为如下的写法：

```
sum := 0
for {
	sum++
	if sum > 100 {
		break
	}
}
```

　　在条件表达式中也支持多重赋值，如下所示：

```
a := []int{1, 2, 3, 4, 5, 6}
for i, j := 0, len(a) – 1; i < j; i, j = i + 1, j – 1 {
	a[i], a[j] = a[j], a[i]
}
```

　　使用循环语句时，需要注意的有以下几点。

* 左花括号 { 必须与 for 处于同一行。
* Go 语言中的 for 循环与 C 语言一样，都允许在循环条件中定义和初始化变量，唯一的区别是，Go 语言不支持以逗号为间隔的多个赋值语句，必须使用平行赋值的方式来初始化多个变量。
* Go 语言的 for 循环同样支持 continue 和 break 来控制循环，但是它提供了一个更高级的 break，可以选择中断哪一个循环，如下例：

```
for j := 0; j < 5; j++ {
	for i := 0; i < 10; i++ {
		if i > 5 {
			break JLoop
		}
		fmt.Println(i)
	}
}
JLoop:
// ...
```

　　本例中，break 语句终止的是 JLoop 标签处的外层循环。

# 跳转语句

　　goto 语句被多数语言学者所反对，谆谆告诫不要使用。但对于 Go 语言这样一个惜关键字如金的语言来说，居然仍然支持 goto 关键字，无疑让某些人跌破眼镜。但就个人一年多来的 Go 语言编程经验来说，goto 还是会在一些场合下被证明是最合适的。

　　goto 语句的语义非常简单，就是跳转到本函数内的某个标签，如：

```
func myfunc() {
	i := 0
	HERE:
	fmt.Println(i)
	i++
	if i < 10 {
		goto HERE
	}
}
```

